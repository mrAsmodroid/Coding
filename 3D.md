# Правила создания 3D моделей для AsmoDevKit
[![Site](https://softwaredev.space/Logo128.png)](https://worldofar.com/)

Данные правила применяются для создания и редактирования 3D моделей. Они не являются универсальными и действуют только в рамках проектов, связанных с моей командой. Все дополнительные требования и уточнения должны согласовываться непосредственно с разработчиком и могут быть добавлены в этот документ.

## Среда разработки
* Вся разработка осуществляется в **Blender**.
* Если у вас нет опыта работы в данной среде, перед экспортом финального варианта модели рекомендуется самостоятельно изучить правильные методы экспорта готовой модели через **Blender**.
* Другие варианты разработки не рассматриваются.

![img](https://softwaredev.space/git/blender.png)

## Геометрия
* Используйте **Mid/Low Poly** модели.
* Все модели предназначены для работы на мобильных устройствах.
* Полигональная сетка должна быть упрощена до минимально допустимых значений, чтобы сохранить необходимый внешний вид объекта без дефектов и артефактов.
* Количество полигонов для каждой модели зависит от требований конкретного проекта и варьируется в зависимости от класса устройств, для которых планируется запуск, типа объекта (фокусный, ближний план, дальний план) и плотности кадра (плотная, средняя, легкая, индивидуальная).

Для упрощения понимания лимитов полигонов воспользуйтесь таблицей ниже. Пределы указаны в процентах от максимально допустимых значений для каждого класса устройства и класса проекта и не означают, что необходимо стремиться к этим значениям, как и не превышать их.
- Приложения класса "А": до **3M** полигонов на кадр (для высокопроизводительных устройств).
- Приложения класса "Б": до **1M** полигонов на кадр (для среднепроизводительных устройств и выше).
- Приложения класса "С": до **500k** полигонов на кадр (для низкопроизводительных устройств и выше).

| Тип модели   | Плотная сцена | Средняя сцена | Легкая сцена  | Индивидуальный объект |
|:-------------|:--------------:|:-------------:|:-------------:|:--------------------:|
| Фокус        |   до 15%       |    до 30%     |    до 60%     |    до 80%            |
| Ближний план |   до 0.5%      |    до 1%      |    до 2%      |    до 3%             |
| Дальний план |   до 0.001%    |    до 0.001%  |    до 0.001%  |    до 0.001%         |

* При разработке стен, полов, потолков и окон меши должны создавать перекрестие в невидимых участках для избежания появления "световых щелей" в местах их соприкосновения.

### Пример полигональной сетки:
![img](https://softwaredev.space/git/poligon1.webp) ![img](https://softwaredev.space/git/poligon2.webp)

## Текстуры
### Размер текстур:
* Все текстуры должны иметь соотношение сторон **1:1** и размер **4096x4096** пикселей.

### Формат текстур Albedo:
* Текстура без альфа-канала сохраняется в формате **.jpg**.
* Текстура с альфа-каналом сохраняется в формате **.png**.
* Другие форматы не рассматриваются.

### Виды текстур:
* Albedo
* Metallic
* Normal
* Height Map
* Occlusion Map

Другие виды текстур не следует генерировать и предоставлять в финальном варианте модели.

### Типы текстур
* Все текстуры для моделей ближнего и дальнего плана должны быть представлены в виде атласов.
* Все текстуры для фокусных объектов должны быть в виде тайлинга и/или оверлапа (для пола, стен, повторяющихся элементов) или моно текстуры и должны занимать **100%** размера текстуры для каждого элемента модели. Используйте атласы для групп мелких деталей только если это не повлияет на финальное качество модели.

### Наименование
* Название текстуры должно содержать наименование объекта или геометрии, к которой она относится, и ее тип, разделенные нижним подчеркиванием. Пробелы недопустимы.

### Свет и тени
* Не генерируйте свет и тени на текстурах; текстуры должны быть чистыми.

### Цветные текстуры
* Если планируется возможность "раскрашивания" текстуры в разные цвета, она должна быть белого цвета.
* В случае наличия текстурных деталей на фоне, который можно раскрашивать, необходимо использовать два материала с двумя текстурами для этого элемента/объекта/геометрии. Нижний слой должен быть белого цвета, а верхний слой с деталями — на альфа-канале.

## Группировка и наименование геометрии
* Геометрию группируйте только при необходимости.
* Объекты должны быть расположены в иерархии с учетом их зависимости.
* Наименования объектов должны соответствовать их типу.

### Пример правильной иерархии и группировки объектов с их наименованиями:
![img](https://softwaredev.space/git/Hierarchy.webp)

## Материалы
* Для каждого элемента различной геометрии с различными текстурами создавайте отдельный материал.
* Настройте тип материалов при экспорте для Unity URP с использованием шейдера Lit.

## Экспорт
После окончательного утверждения внешнего вида объекта с менеджером/администратором, контролирующим этот объект, экспорт должен производиться по следующим требованиям:
* Файл исходника модели в формате **.blend**.
* Файл модели в формате **.fbx** с вшитыми текстурами и материалами.
* Все это должно быть упаковано в **.zip** (другие форматы архива недопустимы).
* Отправьте архив менеджеру/администратору.

## Общие принципы
* По возможности используйте повторяющуюся геометрию.
* Все объекты крупных сцен отрисовываются отдельно.
* В случае заранее отрисованной крупной сцены, состоящей из различных объектов, экспортируйте все объекты отдельно. В этом случае необходимо выставить точки пустых объектов (якоря) для дублирования повторяющейся геометрии с сохранением позиции и направления для воспроизведения его в движке.
* Размер объекта должен соответствовать размеру реального объекта, переведенному в единицы редактора. Одна единица в редакторе равна одному метру в реальном мире. Например, если мы делаем стол размером 550x450x750 (Ширина x Глубина x Высота) миллиметров, то в редакторе он должен быть x = 0.55, y = 0.45, z = 0.75. Все размеры должны быть согласованы заранее или предоставлены в концепт-арте.
* Перед отправкой модели, в случае сомнений в соблюдении всех текущих правил, проверьте корректность модели самостоятельно в последней бесплатной версии Unity URP.
* Настройте texel в соответствии с требованиями текстурирования объектов, описанными ранее.
* На повторяющихся элементах используйте оверлап и/или тайлинг.
* Основа 3D модели должна находиться на нулевых координатах и быть "лицом", направленным в сторону оси **Z**.
* Стоит избегать создания плотной геометрии в местах, где объект плохо просматривается.
* По возможности, не создавайте геометрию в "мертвых зонах", где объект не может быть рассмотрен игроком.

## Pivot
* Точка pivot должна находиться всегда в правильной позиции относительно объекта и его использования.
* Если это объекты типа стол, стул, шкаф, здание или объекты интерьера, то точка должна находиться в районе пола или в центре вращения объекта и "лицом" направлена всегда в сторону оси **Z**.

### Пример pivot объектов общего плана
![img](https://softwaredev.space/git/Pivot1.webp) ![img](https://softwaredev.space/git/Pivot2.webp)

* Если это объекты сложной или неправильной формы, то pivot должен находиться по тем же правилам, но в центре зоны соприкосновения объекта с поверхностью.
* Также, если это светильник на стене, картина, лампа на потолке и т. п., то pivot должен находиться в точке соприкосновения "лапки"/корпуса/провода с поверхностью, на которой он "висит".

### Пример pivot объектов на вертикальных поверхностях или "подвисе"
![img](https://softwaredev.space/git/Pivot4.webp) ![img](https://softwaredev.space/git/Pivot5.webp)

* Если это объект типа дверь или похожий по механике объект, то точка pivot должна располагаться в зоне "петель" или в точке угла открытия или поворота объекта.

### Пример pivot объектов с точкой предполагаемого вращения
![img](https://softwaredev.space/git/Pivot3.webp)

* Pivot основного объекта или группы объектов (первого в иерархии) должен находиться в нулевых координатах мирового пространства.
* Если это объект типа "портал для AR", то точка основного pivot должна находиться в нижней центральной точке двери или портала.
![img](https://softwaredev.space/git/Pivot6.webp)

## Обратная связь
* По возникшим вопросам обращайтесь к менеджеру/администратору, который курирует проект.
* Или напрямую к разработчику мануала по адресу mr.asmodroid@gmail.com.

## Будет добавлено позже
* Примеры правильных и неправильных моделей.
* Технические детали экспорта.
* Ссылки на ресурсы.
